#summary Einrichtung und Konfiguration der eXTra-Client Auslieferungsversion

= Betriebsanleitung =

In der Betriebsanleitung wird beschrieben, wie der eXTra-Client zur Konfiguration und Betrieb von Fachverfahren verwendet werden kann. Die Auslieferungsversion des eXTra-Clients besteht aus einem zip-Archiv (z.B. extra-cli-1.0.0.zip). In diesem befindet sich der Basisteil. Die einzelnen Fachverfahren können getrennt vom Basisteil entwickelt werden und werden jeweils in gesonderten zip-Archiven ausgeliefert.

Der eXTra-Client unterstützt mehrere Kommunikationsabläufe, z.B.:
 * Senden von Eingabedateien an den eXTra-Server über einen Webservice
 * Ergebnisse vom eXTra-Server anfordern.
 * Bestätigungen an den eXTra-Server senden 

Programmänderungen des eXTra-Clients sind nur bei tiefgreifenden Funktionserweiterungen (z.B. Anpassungen an neuen eXTra-Standard) notwendig.

Der Kommunikationsablauf wird vom eXTra-Client in einer Datenbank protokolliert. Neben den einzelnen Aktionen werden z.B. auch Serverantworten die in späteren Schritten benötigt werden (z.B. Response-ID) oder Empfangszertifikate in der Datenbank abgelegt. Außerdem kann konfigurativ das Logging aktiviert werden (z.B. für die Fehlersuche). Die Skripte zum Aufbau der Datenbank befinden sich in der Auslieferungsversion.

Auf der Seite [eXTraClientBetriebSzenarioSendFetch] wird exemplarisch die Installation des eXTra-Clients mit einem technischen Referenzverfahren beschrieben.

= Anforderungen an den Betriebsrechner =
Der eXTra-Client wird als Java Anwendung ausgeliefert und benötigt eine Java 6 Laufzeitumgebung. Er ist nicht an ein spezielles Betriebssystem gebunden. Für die Protokollierung des Kommuninkationsablaufes wird eine Datenbank benötigt (siehe [eXTraClientBetriebDatenbank Datenbank]). Für den Kommunikationsablauf müssen evtl. bestimmte Externe eXTra-Server erreichbar sein.

= Bestandteile der Basisversion (extraClient) =

Die Auslieferungsversion besteht aus dem Programm-Bereich, einem exemplarischen Ausführungs-Bereich und einem SQL-Skript-Bereich. Jeder Bereich befindet sich in einem Verzeichnis:

==== Ausführungsbereich (Verzeichnis: /bin) ==== 
Hier befinden sich beispielhaft Batch-Dateien für Windows (eXTra-cli.bat) und Linux. 

==== Programmbereich (Verzeichnis: /lib) ====
Hier stehen sämtliche benötigte Jar-Dateien - sowohl die eXTra-Jar-Dateien als auch die externen Bibliotheken zur Verfügung. Für eine Datenbindung Anbindung werden spezielle JDBC-Treiber benötigt (z.B. Oracle JDBC). Diese werden nicht mitgeliefert und müssen hier abgelegt werden.

==== SQL-Skript-Bereich (Verzeichnis: /sql) ==== 
Hier sind SQL-Skripte für den Aufbau der eXTra-Client Datenbank abgelegt. 

Aufgrund des modularen Aufbaus und der konfigurativen Steuerung des EXTra-Clients können zur Basisversion weitere Fachverfahren hinzugefügt werden. Pro Fachverfahren sollte die Konfiguration in einem Konfigurationsverzeichnisse abgelegt werden. Jedem Fachverfahren ist ein DB-Skript für die Initialisierung zugewiesen. 

= Installation/Bereitstellung einer Version =
Die Bereitstellung einer Version erfolgt in diesen Schritten:
 * Auspacken der Auslieferungsversion in einem Verzeichnis auf dem Betriebsrechner
 * DB-Treiber in den lib-Ordner Kopieren
 * Fachverfahren in einem eigenen Ordner ablegen. 
 * Konfigurationsdateien des Fachverfahrens an die Umgebung des Betriebsrechners anpassen (z.B. Verzeichnisse für Input und Output).
 * eXTra-Client Datenbank einrichten, initialisieren oder updaten (z.B. über mitgeliefertes SQL-Skript).
 * Batch-Dateien für den Aufruf der Fachverfahren im Ordner _bin_ erstellen bzw. anpassen

Genauere Informationen zur Einrichtung eines Fachverfahrens befinden sich in der Dokumentation des jeweiligen Fachverfahrens. Beispiel siehe [eXTraClientBetriebSzenarioSendFetch].

==Konfiguration==
Alle Konfigurationsdateien für einen Anwendungsfall befinden sich üblicherweise in einem Verzeichnis (z.B. conf). Dieses Verzeichnis wird beim Aufruf des eXTra-Clients als Parameter übergeben. 
Folgende Dateien bilden die Konfigurationsdaten für ein Fachverfahren:

|| *Datei* || *Beschreibung* ||
|| [eXTraClientBetriebConfigBasis extra-properties-basic.properties] || Zentrale Konfigurationsdatei. Besteht aus Attribut-Werte Paaren (Java-properties Format). In dieser Datei werden z.B. das Fachverfahren, die Plugins und die XML-Builder konfiguriert. ||
|| [eXTraClientBetriebConfigUser extra-properties-user.properties] || Ergänzende/überschreibende Einstellungen. Üblicherweise sind hier die Verbindungsparameter zur Datenbank und die Webservice-Zieladresse abgelegt. ||
|| [eXTraClientBetriebLogging logging-config.xml] || Logging Einstellungen (z.B. Name der Logfiles und Loglevel) ||
|| [eXTraClientBetriebConfigProfile ‚profile.xml’] || eXTra-Profil Datei (siehe eXTra Standard). In der Profil-Date sind die Elemente des Extra-Standards aufgeführt, die zur Kommunikation zwischen Client und Server verwendet werden sollen (Der Name ist frei wählbar.)||

==Aufruf der Fachverfahren==
Die Fachverfahren können über Batch-Dateien aufgerufen werden. Beispielhaft befindet sich im _/bin_ Verzeichnis der Auslieferungsversion ein Aufruf für Windows und Linux. In diesen Skripten wird eine Umgebungsvariable EXTRA_CLIENT_HOME für den Zugriff auf die eXTra-Client Dateien verwendet.

*Beispiel für einen einfachen Aufruf:*

java -jar extra-cli-1.0.0-SNAPSHOT.jar -l logs -c conf

Das Logging erfolgt in das Verzeichnis logs. Die Konfiguration wird aus dem Verzeichnis conf gelesen.

===Aufrufparameter===

|| Parameter || Beispiel || Beschreibung ||
|| -c || -c conf || Konfiguration wird aus dem Verzeichnis _conf_ gelesen *(Pflicht)* ||
|| -l || -l logs || Logs werden in das Verzeichnis _logs_ geschrieben ||
|| -h || -h || Hilfe ||
		