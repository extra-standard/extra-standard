= eXTRa Szenario Send-Fetch (Sende-Hole Betrieb)=

Das Szenario Send-Fetch ist ein technisches Referenzverfahren, das exemplarisch die Arbeit mit dem eXTra-Client verdeutlichen soll. Dieses Szenario kann als Ausgangspunkt für die Realisierung von Fachverfahren verwendet werden. Für die Ausführung wird eine Version des eXTra Clients benoetigt.  

Im folgenden wird beschrieben, wie das Szenario Send-Fetch auf einem Windows-Rechner eingerichtet werden kann (Anpassung an andere Betriebssysteme (z.B. Linux) mit überschaubarem Aufwand möglich).

== Auslieferungs-Archiv ==
Dieses Szenario wird in dem Format ausgeliefert, in dem auch normale Fachverfahren ausgeliefert werden.
In dem Archiv 'extra-scenario-sendfetch-... .zip' befinden sich alle benötigten Dateien.

== Verzeichnisbeschreibung ==

|| *Verzeichnis* || *Beschreibung* ||
|| /bin || Hier befinden sich ausführbare Batch-Dateien (Windows) für die Phasen 1 bis 3 (phase1.bat, phase2.bat, phase3.bat). ||
|| /conf || Die Konfigurationsdateien sind für jede Phase in einem eigenen Verzeichnis abgelegt (/conf/phase1, /conf/phase2, /conf/phase3). ||
|| /work/input || In diesem Verzeichnis werden Eingabedateien erwartet. ||
|| /work/reports || Ausgabeverzeichnis für Reports. ||
|| /work/responses || Ergebnisdateien werden hier abgelegt. ||
|| /logs || Ausgabeort für Logdateien die während der Programmausführung erzeugt werden. ||





In jedem dieser Konfigurationsverzeichnis (conf/phase...) befinden sich diese Dateien:

|| *Datei* || *Beschreibung* ||
|| extra-properties-basic.properties || Allgemeine Konfigurationseinstellungen ||
|| extra-properties-user.properties || Spezifische Einstellungen (Datenbankverbindung, Eingabedateien, ...)||
|| logging-config.xml || Logging Konfiguration ||
|| phase...profil.xml || eXTra Profil-Datei ||

== Ausführbare Version erstellen ==

|| *Schritt* || *Datei/Ordner* || *Aktion* ||
|| 1 || D:\eXTra, D:\eXTra\Fachverfahren || Verzeichnisse anlegen ||
|| 1 || extra-cli-1.0.0-M1.zip || Auspacken in: D:\eXTra ||
|| 

 
 * eXTra Client (Archiv: extra-cli-1.0.0-SNAPSHOT.zip) auspacken, z.B. D:\extra-client
 * Parallel dazu, in einem Verzeichnis (z.B. fachverfahren) dieses Archiv (extra-scenario-sendfetch-1.0.0-SNAPSHOT.zip) auspacken
Folgende Struktur ergibt sich:

{{{
D:
- extra-client
  - bin
  - lib
  - sql
- fachverfahren
  - extra-scenario-sendfetch
    - bin
    - conf
      - phase1
      - phase2
      - phase3
    - logs
    - sql
    - work
      - input
      - reports
      - responses
}}}
      
 * Die eXTra Client Datenbank muss angelegt und initial befüllt werden (siehe WIKI: https://code.google.com/p/extra-standard/wiki/eXTraEinfuehrung?tm=6). Dazu müssen folgende Skripte auf der DB ausgeführt werden (Aktuell wird nur Oracle unterstützt):

|| *Skript* || *Beschreibung* ||
|| extra-client \ sql \ V1__1_0_0_createInitialDatabase.sql || Initiale Datenbankerzeugung ||
|| extra-client \ sql \ V2__1_0_0_createInitialData.sql || Initiale Datenbefüllung ||
|| extra-scenario-sendfetch \ sql \ V3__1_0_0_createInitialData.sql || Initiale Datenbefüllung für das Szenario Send-Fetch ||

Die Skripte können mit einem DB-Administrierungswerkzeug oder mit Flyway (http://code.google.com/p/flyway/) ausgeführt werden.

 * Die DB-Verbindung muss in den Dateien 'extra-properties-user.properties' (in den Verzeichnissen conf/phase1, conf/phase2, conf/phase3) angegeben werden.
 * Aufruf des eXTra Clients: Im Verzeichnis 'extra-scenario-sendfetch/bin' befindet sich für jede Phase eine ausführbare Batchdatei.   